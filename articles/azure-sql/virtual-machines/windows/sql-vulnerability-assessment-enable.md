---
title: Evaluación de vulnerabilidades de SQL para SQL Server en máquinas virtuales de Azure
description: Describe la evaluación de vulnerabilidades de SQL para las bases de datos de SQL Server que se ejecutan en máquinas virtuales de Azure.
services: virtual-machines-windows
author: MashaMSFT
ms.service: virtual-machines-sql
ms.subservice: security
ms.topic: conceptual
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 12/02/2020
ms.author: mathoma
ms.openlocfilehash: 817203b8e795ce15c8c48c18bc7b9a46217dc93a
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/19/2021
ms.locfileid: "97356734"
---
# <a name="sql-vulnerability-assessment-for-sql-server-on-azure-vms"></a>Evaluación de vulnerabilidades de SQL para SQL Server en máquinas virtuales de Azure
[!INCLUDE[appliesto-sqlvm](../../includes/appliesto-sqlvm.md)]

La evaluación de vulnerabilidades (VA) de SQL es un servicio fácil de configurar que puede detectar, realizar un seguimiento y corregir posibles puntos vulnerables en la base de datos. Úsela para mejorar la seguridad de la base de datos de manera proactiva para su instancia de SQL Server en máquinas virtuales de Azure. 

La evaluación de vulnerabilidades forma parte de la oferta [Azure Defender for SQL](../../database/azure-defender-for-sql.md), que es un paquete unificado de funcionalidades de seguridad avanzadas de SQL. Se puede acceder a la evaluación de vulnerabilidades y administrarla a través del portal central de Azure Defender for SQL o a través de Azure Security Center. 

## <a name="overview"></a>Información general

La evaluación de vulnerabilidades (VA) de SQL es un servicio que proporciona visibilidad del estado de seguridad. La evaluación de vulnerabilidades incluye pasos procesables para resolver problemas de seguridad y mejorar la seguridad de la base de datos. En este sentido, le puede ayudar a: 

- Satisfacer los requisitos de cumplimiento que requieren los informes de examen de base de datos 
- Cumplir los estándares de privacidad de los datos 
- Supervisar un entorno de base de datos dinámico donde resulta difícil realizar un seguimiento de los cambios 

La evaluación de vulnerabilidades es un servicio de análisis que emplea una base de conocimiento de reglas que marcan las vulnerabilidades de seguridad. Se resaltan las desviaciones de los procedimientos recomendados, como configuraciones inadecuadas, permisos excesivos y datos confidenciales desprotegidos. 

Las reglas se basan en los procedimientos recomendados de Microsoft y se centran en los problemas de seguridad que presentan mayores riesgos para la base de datos y sus valiosos datos. Tratan los problemas de nivel de base de datos y los problemas de seguridad de nivel de servidor, como la configuración del firewall de servidor y los permisos de nivel de servidor. Estas reglas también representan muchos de los requisitos que deben cumplir diversos organismos reguladores para satisfacer los estándares de cumplimiento. 

Los resultados del examen incluyen pasos que requieren acción para corregir cada uno de los problemas y proporcionan scripts de solución personalizados donde sea aplicable. Para personalizar un informe de evaluación de su entorno, debe establecer una línea de base aceptable de lo siguiente: 

- Configuraciones de permisos 
- Configuraciones de características 
- Configuración de base de datos 

## <a name="enable-sql-va"></a>Habilitación de la evaluación de vulnerabilidades de SQL

Habilite Azure Defender para servidores SQL Server en las máquinas para implementar la evaluación de vulnerabilidades. 

Para usar Azure Defender para servidores SQL Server, siga estos pasos:

1. [Instalación de la extensión Agente de IaaS de SQL](sql-agent-extension-manually-register-single-vm.md)
1. [Habilitación del aprovisionamiento automático del agente de Log Analytics](../../../security-center/security-center-enable-data-collection.md#auto-provision-mma)
1. [Habilitación del plan de Security Center opcional](../../../security-center/defender-for-sql-usage.md#step-2-enable-the-optional-plan-in-security-centers-pricing-and-settings-page)

Como la evaluación de vulnerabilidades forma parte de Azure Defender for SQL, una vez que Azure Defender está habilitado en la máquina virtual, las bases de datos se analizan automáticamente cada 12 horas para identificar las vulnerabilidades de seguridad. Los resultados se envían a Azure Security Center para obtener una vista agregada centralizada del patrimonio de datos de SQL protegidos por Azure Defender for SQL. 

> [!NOTE]
> El examen es sencillo y seguro, solo tarda unos segundos en ejecutarse por cada base de datos y es completamente de lectura. No realiza ningún cambio en la base de datos. 

## <a name="view-report"></a>Ver informe

El informe de las bases de datos presenta una visión general del estado de seguridad. En él se muestra el número de problemas encontrados y sus respectivos niveles de gravedad. Los resultados incluyen advertencias sobre las desviaciones con respecto a los procedimientos recomendados, así como una instantánea de la configuración relacionada con la seguridad, como las entidades de seguridad y los roles de base de datos y sus permisos asociados.  

Para ver el informe, siga los pasos siguientes:

1. Vaya a [Azure Security Center](https://ms.portal.azure.com/#blade/Microsoft_Azure_Security/SecurityMenuBlade/0) en Azure Portal.
1. Seleccione **Recomendaciones** en el menú **General**: 

   :::image type="content" source="media/sql-vulnerability-assessment-enable/recommendations-in-security-center.png" alt-text="Vaya a Recomendaciones en Configuración en Azure Security Center desde Azure Portal":::

1. Desplácese hacia abajo hasta las recomendaciones y expanda **Corrección de vulnerabilidades**.
1. Seleccione **Es necesario corregir los resultados de la evaluación de vulnerabilidades de los servidores SQL Server en las máquinas**. 

   :::image type="content" source="media/sql-vulnerability-assessment-enable/report-in-security-center.png" alt-text="Vea el informe en la hoja de recomendaciones de Azure Security Center":::

En esta página se muestra un conjunto de vulnerabilidades de seguridad identificadas para todas las máquinas virtuales de los servidores SQL Server de la suscripción. 


## <a name="analyze-results"></a>Analizar resultados

Revise los resultados e identifique qué resultados del informe son, verdaderamente, problemas de seguridad en su entorno. Examine con detalle cada resultado erróneo para entender el impacto de la búsqueda y por qué se ha producido un error en las comprobaciones de seguridad.  

:::image type="content" source="media/sql-vulnerability-assessment-enable/sample-report.png" alt-text="Revise los resultados e identifique qué resultados del informe son, verdaderamente, problemas de seguridad en su entorno.":::

## <a name="set-baseline"></a>Establecer línea base 

Cuando revise los resultados de la evaluación, puede marcar los resultados como una línea de base aceptable en su entorno. La línea de base es fundamentalmente una personalización de cómo se notifican los resultados. Los resultados que coinciden con la línea de base se consideran como correctos en análisis posteriores. Una vez establecido el estado de seguridad de línea de base, la evaluación de vulnerabilidades solo informa de las desviaciones con respecto a esa línea de base. De esta manera, podrá centrar su atención en los problemas relevantes. 

:::image type="content" source="media/sql-vulnerability-assessment-enable/analyze-report-for-details.png" alt-text="Cuando revise los resultados de la evaluación, puede marcar los resultados específicos como una línea de base aceptable en su entorno.":::

## <a name="export-results"></a>Exportar resultados

Use la característica de [Exportación continua](../../../security-center/continuous-export.md) de Azure Security Center para exportar los resultados de la evaluación de vulnerabilidades a Azure Event Hub o a un área de trabajo de Log Analytics. 


## <a name="next-steps"></a>Pasos siguientes

Para más información, consulte [Evaluación de vulnerabilidades de SQL en Azure SQL](../../database/sql-vulnerability-assessment.md) y [Defender los datos de SQL con Azure Security Center](../../../security-center/security-center-introduction.md).

